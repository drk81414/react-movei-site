#+TITLE: Presentation
#+AUTHOR: Aditya Yadav

* Movie Review
#+ATTR_HTML: :width 1000px
[[file:Readme-images/main-page.png]]

The Movie Review website
* Directory structure
movies-review
├── components               ( The components folder contains all the small individual React components which make up the website )
│   ├── AboutUs
│   │   └── Profile
│   ├── Common               ( Common folder contains react components which are used multiple times though the project )
│   │   ├── Button
│   │   ├── Footer
│   │   ├── Grid
│   │   ├── Header
│   │   ├── Spinner
│   │   └── Thumbnail
│   ├── ContactUs
│   │   └── ContactInfo
│   ├── Home
│   │   ├── BannerImage
│   │   └── SearchBar
│   ├── Login
│   ├── Movies
│   │   ├── Actor
│   │   ├── BreadCrumb
│   │   ├── MovieInfo
│   │   └── MovieInfoBar
│   ├── NotFound
│   └── SignUp
├── hooks                    ( The hooks folder contains the react hooks which update the infomation and causes a render of the page )
└── images
* React
The main point of react comes down to two point
** React has small components which can be defined in seperate files and then used as tag in the main page
The example below is a small footer containing two link
#+ATTR_HTML: :width 1000px
[[file:Readme-images/footer-example.png]]

#+begin_src html
const Footer = () => (
  <Wrapper>
    <Content>
      <Link to='/AboutUs' style={{ textDecoration: 'none' }}>
        <p>About Us</p>
      </Link>
      <Link to='/ContactUs' style={{ textDecoration: 'none' }}>
        <p>Contact Us</p>
      </Link>
    </Content>
  </Wrapper>
);
export default Footer;
#+end_src
** The pages on website never changes . The only change happens when the re-render of website is causes by hooks
The below hook is used to fetch the next page of movies from the API and then it appends it to the end of existing
movies in the array. After it has fetched the movies it uses the useEffect to trigger a re render of the page.
#+begin_src js
export const useHomeFetch = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [state, setState] = useState(initialState);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(false);
  const [isLoadingMore, setIsLoadingMore] = useState(false);

  const fetchMovies = async (page, searchTerm = "") => {
    try {
      setError(false);
      setLoading(true);
      const movies = await API.fetchMovies(searchTerm, page);

      setState(prev => ({
        ...movies,
        results:
          // Appending the new moveis from page after 1 to the end of the array
          page > 1 ? [...prev.results, ...movies.results] : [...movies.results]
      }))
    } catch (error) {
      setError(true);
    }
    setLoading(false);
  };

  // Fetching the movies from the datbase
  useEffect(() => {
    if(!searchTerm){
      const sessionState = isPersistedState('homeState');
      if(sessionState){
        setState(sessionState);
        return;
      }
    }

    setState(initialState);
    fetchMovies(1, searchTerm);
  }, [searchTerm]);
#+end_src
